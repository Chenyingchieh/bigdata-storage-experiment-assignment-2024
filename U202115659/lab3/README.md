# 大数据存储系统与管理2024 lab3

## 实验名称

对象存储性能分析

## 实验环境

|                |                                                   |
| -------------- | ------------------------------------------------- |
| 处理器         | AMD Ryzen 7 5800U with Radeon Graphics   1.90 GHz |
| 内存           | 32.0GB                                            |
| 操作系统       | Windows 10 家庭中文版                             |
| 对象存储服务器 | MinIO Server                                      |
| 对象存储客户端 | MinIO Client                                      |
| 评测工具       | s3bench                                           |

## 实验记录

- #### s3bench安装

首先进行go语言环境的配置，过程比较简单因此没有记录

然后在命令行中下载s3bench

![](.\figures\image-20240420151938718.png)

- #### 简单测试

下载脚本cmd，对账户、密码、端口、bucket等进行修改

![](.\figures\image-20240420152617624.png)

运行的结果如下示例

![](.\figures\image-20240420152759477.png)

- #### 观测对象尺寸对性能的影响

改变脚本中的objectSize，共取了4096/16384/65536/262144/524288/1048576/2097152/4194304八个数值

numClients默认为8，numSamples取256

进行测试，得到结果文件，并绘制出对象尺寸与各个数据之间的关系图

[测试结果]: .\figures\objectSize

- 对象尺寸与总吞吐量

![](.\figures\objectSize\TotalThroughput.png)

可以发现，读写吞吐量基本随着对象大小的增长而增长，对于小中型文件，系统基本随着对象尺寸增大而效率提高。但在1MB之后，写吞吐量会明显小于读吞吐率，这可能是受磁盘中的其他I/O操作以及其他因素影响导致的。

- 对象尺寸与响应时间

![](.\figures\objectSize\TotalDuration.png)

而对于响应时间，在处理小文件（小于1MB）时，读响应时间会长于写响应时间；而在处理中大文件（大于1MB）时，写响应时间则会远长于读响应时间。这表明，在处理较大文件时，系统的写效率会明显降低，说明系统在处理大对象时存在性能瓶颈。

- #### 观测用户规模对性能的影响

改变脚本中的numClients，共取了1/2/4/8/16/32/64/128八个数值

objectSize默认为1MB，numSamples取256

进行测试，得到结果文件，并绘制出用户规模与各个数据之间的关系图

[测试结果]: .\figures\numClients

- 用户规模与总吞吐量

![](.\figures\numClients\TotalThroughput.png)

当用户规模变大，服务器需要处理更多的请求，显然总吞吐量会增加，但这种增加的趋势很快就停止了，而是趋于一个平稳的数值。这是因为，服务器要花更多的时间来处理正在排队的请求，而非新的请求，服务器的吞吐能力已经达到了饱和值。

- 用户规模与响应时间

![](.\figures\numClients\TotalDuration.png)

在上一条分析中我们提到，服务器要花费更多的时间处理排队请求，而非新的请求，这也就会导致延迟增长。但是同样的，总持续时间在最后会趋于平稳，这也是因为服务器的性能已达到饱和值。

- #### 实验小结

在本次实验中，我主要通过调控objectSize和numClient两个值观测了系统的性能改变情况，并针对吞吐量和持续时间进行了分析。根据实验结果，我们可以知道，针对不同的应用场合与需求，我们需要采取不同的优化策略，比如针对对象大小和用户规模来调整处理机制。

本次实验让我明白了测试与分析的重要性，但是由于我对脚本的改写规则并不明确，所以未能实现更详细的改写。
